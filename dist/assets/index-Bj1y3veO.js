import{b as Re,r as i,j as e,T as Y,I as Me,C as Oe,P as De,d as Z,V as Ie,L as Q,e as ee,f as Pe,h as Te,S as te,i as Ae,k as Ee,l as z,m as Le,O as se,n as Ve,o as ae,p as ze,X as $e,q as re,D as oe,s as Be,t as Fe,u as Ke,v as _e,w as He,x as Ue,y as qe,z as Je,A as U,B as Ge,E as We,R as Xe}from"./ui-bC3FtgaK.js";import{t as Ye,u as P,a as q,$ as ne,M as Ze}from"./vendor-B5_9d94S.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();var E={},J=Re;E.createRoot=J.createRoot,E.hydrateRoot=J.hydrateRoot;function ie(s){var a,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(a=0;a<o;a++)s[a]&&(t=ie(s[a]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function le(){for(var s,a,t=0,r="",o=arguments.length;t<o;t++)(s=arguments[t])&&(a=ie(s))&&(r&&(r+=" "),r+=a);return r}function u(...s){return Ye(le(s))}const Qe=Ae,et=Ee,ce=i.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Y,{ref:r,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:[a,e.jsx(Me,{asChild:!0,children:e.jsx(Oe,{className:"h-4 w-4 opacity-50"})})]}));ce.displayName=Y.displayName;const de=i.forwardRef(({className:s,children:a,position:t="popper",...r},o)=>e.jsx(De,{children:e.jsx(Z,{ref:o,className:u("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-100 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s,t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1"),position:t,...r,children:e.jsx(Ie,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a})})}));de.displayName=Z.displayName;const tt=i.forwardRef(({className:s,...a},t)=>e.jsx(Q,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",s),...a}));tt.displayName=Q.displayName;const ue=i.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ee,{ref:r,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Pe,{children:e.jsx(Te,{className:"h-4 w-4"})})}),a]}));ue.displayName=ee.displayName;const st=i.forwardRef(({className:s,...a},t)=>e.jsx(te,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",s),...a}));st.displayName=te.displayName;const L=i.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));L.displayName="Input";var at="Label",fe=i.forwardRef((s,a)=>e.jsx(z.label,{...s,ref:a,onMouseDown:t=>{var o;t.target.closest("button, input, select, textarea")||((o=s.onMouseDown)==null||o.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));fe.displayName=at;var me=fe;const V=i.forwardRef(({className:s,...a},t)=>e.jsx(me,{ref:t,className:u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...a}));V.displayName=me.displayName;const G=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,W=le,rt=(s,a)=>t=>{var r;if((a==null?void 0:a.variants)==null)return W(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:n}=a,l=Object.keys(o).map(f=>{const y=t==null?void 0:t[f],b=n==null?void 0:n[f];if(y===null)return null;const c=G(y)||G(b);return o[f][c]}),p=t&&Object.entries(t).reduce((f,y)=>{let[b,c]=y;return c===void 0||(f[b]=c),f},{}),h=a==null||(r=a.compoundVariants)===null||r===void 0?void 0:r.reduce((f,y)=>{let{class:b,className:c,...k}=y;return Object.entries(k).every(v=>{let[g,x]=v;return Array.isArray(x)?x.includes({...n,...p}[g]):{...n,...p}[g]===x})?[...f,b,c]:f},[]);return W(s,l,h,t==null?void 0:t.class,t==null?void 0:t.className)},ot=rt("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",outline:"border border-primary bg-background hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=i.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...o},n)=>{const l=r?Le:"button";return e.jsx(l,{className:u(ot({variant:a,size:t,className:s})),ref:n,...o})});O.displayName="Button";function X(s,a){const[t,r]=i.useState(()=>{try{const n=window.localStorage.getItem(s);return n?JSON.parse(n):a}catch(n){return console.log(n),a}});return[t,n=>{try{const l=n instanceof Function?n(t):n;r(l),window.localStorage.setItem(s,JSON.stringify(l))}catch(l){console.log(l)}}]}const nt=Be,it=Fe,pe=ze,lt=Ve,ct=i.forwardRef(({className:s,...a},t)=>e.jsx(se,{ref:t,className:u("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));ct.displayName=se.displayName;const he=i.forwardRef(({className:s,children:a,...t},r)=>e.jsx(lt,{children:e.jsxs(ae,{ref:r,className:u("fixed inset-y-0 right-0 z-50 w-full overflow-y-auto border-l border-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-right-full sm:max-w-sm",s),...t,children:[a,e.jsxs(pe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary data-[state=open]:text-muted-foreground",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})}));he.displayName=ae.displayName;const ge=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col space-y-1.5 text-left",s),...a});ge.displayName="DrawerHeader";const xe=({className:s,...a})=>e.jsx("div",{className:u("mt-6 flex justify-end",s),...a});xe.displayName="DrawerFooter";const ye=i.forwardRef(({className:s,...a},t)=>e.jsx(re,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",s),...a}));ye.displayName=re.displayName;const be=i.forwardRef(({className:s,...a},t)=>e.jsx(oe,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));be.displayName=oe.displayName;var $="Switch",[dt,bt]=He($),[ut,ft]=dt($),ve=i.forwardRef((s,a)=>{const{__scopeSwitch:t,name:r,checked:o,defaultChecked:n,required:l,disabled:p,value:h="on",onCheckedChange:f,form:y,...b}=s,[c,k]=i.useState(null),v=Ke(a,j=>k(j)),g=i.useRef(!1),x=c?y||!!c.closest("form"):!0,[w=!1,D]=_e({prop:o,defaultProp:n,onChange:f});return e.jsxs(ut,{scope:t,checked:w,disabled:p,children:[e.jsx(z.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":Ne(w),"data-disabled":p?"":void 0,disabled:p,value:h,...b,ref:v,onClick:Ue(s.onClick,j=>{D(T=>!T),x&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})}),x&&e.jsx(mt,{control:c,bubbles:!g.current,name:r,value:h,checked:w,required:l,disabled:p,form:y,style:{transform:"translateX(-100%)"}})]})});ve.displayName=$;var we="SwitchThumb",je=i.forwardRef((s,a)=>{const{__scopeSwitch:t,...r}=s,o=ft(we,t);return e.jsx(z.span,{"data-state":Ne(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:a})});je.displayName=we;var mt=s=>{const{control:a,checked:t,bubbles:r=!0,...o}=s,n=i.useRef(null),l=qe(t),p=Je(a);return i.useEffect(()=>{const h=n.current,f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==t&&b){const c=new Event("click",{bubbles:r});b.call(h,t),h.dispatchEvent(c)}},[l,t,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...o,tabIndex:-1,ref:n,style:{...s.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ne(s){return s?"checked":"unchecked"}var Se=ve,pt=je;const Ce=i.forwardRef(({className:s,...a},t)=>e.jsx(Se,{className:u("peer h-5 w-9 rounded-full bg-secondary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:ring-offset-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 transition-transform duration-200",s),...a,ref:t,children:e.jsx(pt,{className:u("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg transition-transform duration-200 data-[state=checked]:translate-x-0")})}));Ce.displayName=Se.displayName;function ht(){const[s,a]=i.useState([]),[t,r]=i.useState(""),[o,n]=i.useState([]),[l,p]=X("selectedModel",""),[h,f]=X("openRouterApiKey",""),[y,b]=i.useState(!1),[c,k]=i.useState(!1),v=i.useRef(null),[g,x]=i.useState(!1),[w,D]=i.useState(!0);i.useEffect(()=>{(async()=>{D(!0);try{const R=(await q.get("http://localhost:11434/api/tags")).data.models.map(m=>m.name);n(R),R.length>0&&!l&&p(R[0])}catch(N){P.error(N.message||"Make sure Ollama is running."),console.error("Error fetching models:",N)}finally{D(!1)}})()},[p,l]),i.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[s]);const j=i.useCallback(async()=>{if(!t||g)return;if(c&&!/^[a-zA-Z0-9]{32}$/.test(h)){P("Please provide a valid 32-character API key.");return}const d=new Date().toLocaleTimeString(),N={role:"user",content:t,timestamp:d};a(m=>[...m,N]),r("");let R={role:"assistant",content:"",timestamp:new Date().toLocaleTimeString()};a(m=>[...m,R]),x(!0);try{let m="http://localhost:11434/api/generate",C={model:l,prompt:t,stream:!0};c&&h&&(m="https://openrouter.ai/api/v1/chat/completions",C={model:l,messages:[...s].map(S=>({role:S.role,content:S.content})),stream:!0});const A=await q.post(m,C,{headers:c?{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"},responseType:"stream"});let B="";A.data.on("data",S=>{const F=new TextDecoder().decode(S);try{F.split(`
`).filter(I=>I.trim()!=="").forEach(I=>{if(I.trim()==="")return;const _=JSON.parse(I),H=c?_.choices[0].delta.content:_.response;H&&(B+=H,a(ke=>{const M=[...ke];return M[M.length-1]={...M[M.length-1],content:B},M}))})}catch(K){console.error("Error parsing JSON:",K,F)}}),A.data.on("end",()=>{x(!1)}),A.data.on("error",S=>{x(!1),P(S.message||"An error occurred while streaming the response."),console.error("Streaming error:",S)})}catch(m){x(!1);let C=m.message||"Failed to send message.";m.response&&m.response.data&&(C=m.response.data.error||C),P(C),console.error("Error sending message:",m)}},[t,s,l,h,c,x]),T=()=>{a([])};return e.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[e.jsx(ne,{richColors:!0,position:"bottom-right"}),e.jsx("header",{className:"bg-white shadow",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Chat"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Qe,{onValueChange:p,"aria-label":"Select AI Model",disabled:w,children:[e.jsxs(ce,{className:"w-[150px] sm:w-[220px]",children:[e.jsx(et,{placeholder:w?"Loading...":"Select a model"}),w&&e.jsx(U,{className:"h-4 w-4 animate-spin"})]}),e.jsx(de,{children:o.map(d=>e.jsx(ue,{value:d,children:d},d))})]}),e.jsxs(nt,{children:[e.jsx(it,{asChild:!0,children:e.jsx(O,{variant:"outline",size:"icon","aria-label":"Open settings",children:e.jsx(Ge,{className:"h-4 w-4"})})}),e.jsxs(he,{children:[e.jsxs(ge,{children:[e.jsx(ye,{children:"Settings"}),e.jsx(be,{children:"Manage your preferences for AI Chat."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(V,{htmlFor:"openrouter",className:"text-right",children:"Use OpenRouter"}),e.jsx("div",{className:"col-span-3 flex items-center space-x-2",children:e.jsx(Ce,{id:"openrouter",checked:c,onCheckedChange:k,"aria-label":"Use OpenRouter"})})]}),c&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(V,{htmlFor:"openrouter-api-key",className:"text-right",children:"OpenRouter API Key"}),e.jsx(L,{id:"openrouter-api-key",type:"password",value:h,onChange:d=>f(d.target.value),className:"col-span-3","aria-label":"OpenRouter API Key"})]})]}),e.jsx(xe,{children:e.jsx(pe,{children:e.jsx(O,{children:"Close"})})})]})]}),e.jsx(O,{variant:"outline",size:"icon","aria-label":"Clear Conversation",onClick:T,children:e.jsx(We,{className:"h-4 w-4"})})]})]})}),e.jsx("main",{className:"flex-grow overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"space-y-4",ref:v,children:s.map((d,N)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:d.role==="user"?"U":"AI"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`p-3 rounded-lg ${d.role==="user"?"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-800"}`,children:[e.jsx("div",{className:"font-bold",children:d.role==="user"?"You":"AI"}),e.jsx(Ze,{className:"prose",children:d.content})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:d.timestamp})]})]},N))})})}),e.jsx("footer",{className:"bg-white shadow",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex",children:[e.jsx(L,{type:"text",placeholder:"Type your message...",className:"flex-grow rounded-l-md border-r-0",value:t,onChange:d=>r(d.target.value),onKeyDown:d=>{d.key==="Enter"&&j()},disabled:g,"aria-label":"Chat input"}),e.jsxs(O,{onClick:j,className:"rounded-l-none",disabled:g,"aria-label":"Send message",children:[g?"Generating...":"Send",g&&e.jsx(U,{className:"h-4 w-4 animate-spin ml-2"})]})]})})]})}E.createRoot(document.getElementById("root")).render(e.jsxs(Xe.StrictMode,{children:[e.jsx(ne,{richColors:!0,position:"bottom-right"}),e.jsx(ht,{})]}));
